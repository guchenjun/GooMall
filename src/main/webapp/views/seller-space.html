<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>卖家中心</title>
    <link rel="stylesheet" type="text/css" th:href="@{/static/layui/css/layui.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/common.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/seller-space.css}">
</head>
<body>
<div class="gm-cover-wrap">
    <div class="gm-cover">
        <ul class="layui-nav" style="padding: 0">
            <li class="layui-nav-item"><a th:href="@{/}" style="padding: 0">首页</a></li>
            <li class="layui-nav-item" style="margin: 0px 10px 0px 20px;"><a th:href="@{/}" style="padding: 0;">gcj顾晨俊</a></li>
            <li class="layui-nav-item"><a th:href="@{/logout}" style="padding: 0">退出</a></li>
            <li class="layui-nav-item f-right"><a href="#">收藏夹</a></li>
            <li class="layui-nav-item layui-this f-right">
                <a href="">购物车</a>
                <dl class="layui-nav-child mini-cart">
                    <dd style="margin-left: 7px;">最近加入的宝贝：</dd>
                    <dd>
                        <div class="mini-cart-img f-left">
                            <a href="#" style="margin: 0 7px;">
                                <img src="//img.alicdn.com/bao/uploaded/img.alicdn.com/bao/uploaded/i1/3253223961/O1CN01Lir2FN1f8BIlmNVtS_!!0-item_pic.jpg_40x40.jpg">
                            </a>
                        </div>
                        <div class="mini-cart-count f-right" style="font-family: Arial;">
                            <strong class="mini-cat-price" style="color: red;">￥22.00</strong>
                        </div>
                        <div class="mini-cart-title">
                            <a href="https://www.baidu.com">VICENZI意大利进口奶油夹心饼干休闲零食喜饼点心维鲜千层酥小吃</a>
                        </div>
                        <div class="mini-cart-del f-right">
                            <a href="" style="font-size: 13px;">删除</a>
                        </div>
                        <div class="mini-cart-info">
                            <span>口味:圆形奶油夹心125g*1包 </span>
                        </div>
                    </dd>
                    <dd>
                        <div class="mini-cart-img f-left">
                            <a href="#" style="margin: 0 7px;">
                                <img src="//img.alicdn.com/bao/uploaded/img.alicdn.com/bao/uploaded/i1/3253223961/O1CN01Lir2FN1f8BIlmNVtS_!!0-item_pic.jpg_40x40.jpg">
                            </a>
                        </div>
                        <div class="mini-cart-count f-right" style="font-family: Arial;">
                            <strong class="mini-cat-price" style="color: red;">￥22.00</strong>
                        </div>
                        <div class="mini-cart-title">
                            <a href="https://www.baidu.com">VICENZI意大利进口奶油夹心饼干休闲零食喜饼点心维鲜千层酥小吃</a>
                        </div>
                        <div class="mini-cart-del f-right">
                            <a href="" style="font-size: 13px;">删除</a>
                        </div>
                        <div class="mini-cart-info">
                            <span>口味:圆形奶油夹心125g*1包 </span>
                        </div>
                    </dd>
                </dl>
            </li>
            <li class="layui-nav-item layui-this f-right">
                <a href="">我的逛购</a>
                <dl class="layui-nav-child">
                    <dd><a href="">我的订单</a></dd>
                    <dd><a href="">浏览足迹</a></dd>
                </dl>
            </li>
        </ul>
    </div>
</div>
<div class="header">
    <div class="indexroot">
        <span>卖家工作台</span>
    </div>
</div>
<div class="main">
    <div class="main-container">
        <div class="left-seller-menu">
            <div><a th:href="@{/seller/release}" th:classappend="${locationMode?.location eq 'release'} ? 'menu-on'">发布商品</a></div>
            <div><a th:href="@{/seller/manage}" th:classappend="${locationMode?.location eq 'manage'} ? 'menu-on'">管理发布商品</a></div>
            <div><a th:href="@{/seller/order}" th:classappend="${locationMode?.location eq 'order'} ? 'menu-on'">商品订单管理</a></div>
        </div>
        <div class="main-seller-bd">
            <div class="main-release-bd" th:if="${locationMode?.location eq 'release'}">
<!--                发布商品主体-->
                <div class="release-goods-wrapper">
                    <!-- 商品一级分类查看，二级分类、品牌的添加-->
                    <form class="layui-form category-form">
                        <div class="layui-form-item">
                            <label class="layui-form-label">一级分类</label>
                            <div class="layui-input-inline">
                                <select class="category1" lay-filter="category1">
                                    <option value="">请选择一级分类</option>
                                </select>
                            </div>
                            <label class="layui-form-label">二级分类</label>
                            <div class="layui-input-inline">
                                <select class="category2" lay-filter="category2">
                                    <option value="">请选择二级分类</option>
                                </select>
                            </div>
                            <label class="layui-form-label">品牌分类</label>
                            <div class="layui-input-inline">
                                <select class="brand" lay-filter="brand">
                                    <option value="">请选择品牌</option>
                                </select>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">商品名称</label>
                            <div class="layui-input-block">
                                <input type="text" name="shopName" required="" lay-verify="shopName" placeholder="如：Huawei/华为 P30全面屏超感光徕卡三摄变焦双景录像980芯片智能手机p30" class="layui-input">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">商品封面</label>
                            <div class="layui-input-inline">
                                <input class="shopImage" type="hidden" name="shopImage" value="default">
                                <img class="shop-head" src="http://gw.alicdn.com/tps/i3/TB1yeWeIFXXXXX5XFXXuAZJYXXX-210-210.png_50x50.jpg" width="50" height="50">
                                <button type="button" class="layui-btn" id="uploadBtn">
                                    <i class="layui-icon"></i>上传图片
                                </button><input class="layui-upload-file" type="file" accept="undefined" name="file">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">商品图片展示</label>
                            <div class="layui-input-inline">
                                <input class="shopImage" type="hidden" name="shopImage" value="default">
                                <img class="shop-head" src="http://gw.alicdn.com/tps/i3/TB1yeWeIFXXXXX5XFXXuAZJYXXX-210-210.png_50x50.jpg" width="50" height="50">
                                <button type="button" class="layui-btn" id="uploadBtn">
                                    <i class="layui-icon"></i>上传图片
                                </button><input class="layui-upload-file" type="file" accept="undefined" name="file">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">产品概览</label>
                            <div class="layui-input-inline">
                                <input class="shopImage" type="hidden" name="shopImage" value="default">
                                <img class="shop-head" src="http://gw.alicdn.com/tps/i3/TB1yeWeIFXXXXX5XFXXuAZJYXXX-210-210.png_50x50.jpg" width="50" height="50">
                                <button type="button" class="layui-btn" id="uploadBtn">
                                    <i class="layui-icon"></i>上传图片
                                </button><input class="layui-upload-file" type="file" accept="undefined" name="file">
                            </div>
                        </div>

                    </form>
<!--                    <button type="button" class="layui-btn layui-btn-primary"> </button>-->

                </div>
            </div>
            <div class="main-manage-bd" th:if="${locationMode?.location eq 'manage'}">
                管理发布商品
            </div>
            <div class="main-order-bd" th:if="${locationMode?.location eq 'order'}">
                订单管理
            </div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript" th:src="@{/static/js/jquery-3.3.1.min.js}"></script>
<script type="text/javascript" th:src="@{/static/layui/layui.all.js}"></script>
<script type="text/javascript" th:inline="javascript">
    $(function () {
        // 声明类别选择以及品牌id变量
        category1Id = 0, category2Id = 0, brandId = 0;

        function renderForm() {
            layui.use('form', function () {
                var form = layui.form;
                form.render();
            });
        }

        $(".category-form").show(function () {
            goodsCategory = [[${goodsCategory}]];
            if (goodsCategory) {
                category1List = goodsCategory['category1List'];
                category2List = goodsCategory['category2List'];
                brandList = goodsCategory['brandList'];
                brandCategoryList = goodsCategory['brandCategoryList'];
                $(".category1").html("");
                for (let i = 0; i < category1List.length; i++) {
                    $(".category1").append("<option value='" + category1List[i]['id'] + "'>" + category1List[i]['category1Name'] + "</option>");
                }
                renderForm();
                layui.use('form', function () {
                    var form = layui.form;
                    form.on('select(category1)', function (data) {
                        category1Id = data.value;
                        $(".category2").html("");
                        let first = true;
                        for (let i = 0; i < category2List.length; i++) {
                            if (data.value == category2List[i]['category1Id']) {
                                if (first) {
                                    category2Id = category2List[i]['id'];
                                    first = false;
                                }
                                $(".category2").append("<option value='" + category2List[i]['id'] + "'>" + category2List[i]['category2Name'] + "</option>");
                            }
                        }
                        renderForm();
                    });
                    form.on('select(category2)', function (data) {
                        category2Id = data.value;
                        $(".brand").html("");
                        let first = true;
                        for (let i = 0; i < brandCategoryList.length; i++) {
                            if (data.value == brandCategoryList[i]['category2Id']) {
                                for (let j = 0; j < brandList.length; j++) {
                                    if (brandList[j]['id'] == brandCategoryList[i]['brandId']) {
                                        if (first) {
                                            brandId = brandList[j]['id'];
                                            first = false;
                                        }
                                        $(".brand").append("<option value='" + brandList[j]['id'] + "'>" + brandList[j]['brandName'] + "</option>");
                                    }
                                }
                            }
                        }
                        renderForm();
                    });
                    form.on('select(brand)', function (data) {
                        brandId = data.value;
                    });
                });
            }
        });
    });

</script>
</html>